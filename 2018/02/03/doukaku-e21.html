<html><head><meta charset="utf-8" /><meta content="IE=edge;chrome=1" http-equiv="X-UA-Compatible" /><script src="/javascripts/application.js"></script><link href="/stylesheets/application.css" rel="stylesheet" /><title>mtsmfm blog - オフラインリアルタイムどう書く E21 の問題 - ドキドキロシアンルーレット</title><link rel="alternate" type="application/atom+xml" title="Atom Feed" href="/feed.xml" /></head><body><div class="row"><div class="three columns"><h3><a href="/">mtsmfm blog</a></h3><div class="row"><div class="large btn default"><a href="https://github.com/mtsmfm"><i class="fa fa-github"></i></a></div><div class="large btn default"><a href="https://twitter.com/mtsmfm"><i class="fa fa-twitter"></i></a></div></div></div><div class="nine columns"><section class="post"><h2><a href="/2018/02/03/doukaku-e21.html">オフラインリアルタイムどう書く E21 の問題 - ドキドキロシアンルーレット</a></h2><time>2018-02-03</time><p><a href="https://yhpg.doorkeeper.jp/events/69404">オフラインリアルタイムどう書く E21</a> の問題です。</p>

<p>ロシアンルーレットをして、何人かがアタリを引いた。</p>

<p>最初にリボルバーに弾がどう込められていたか求めよ。</p>

<h2>ルール</h2>

<ol>
<li>順番に引き金を引く</li>
<li>ハズレた場合、弾倉を回転させる</li>
<li>アタリを引いた場合、リタイア</li>
<li>ただし、全員回転させかたに癖があり、常に同じ方向に同じだけ回転させる</li>
<li>残弾が 0 になるまで順番に続ける</li>
</ol>

<h2>入力</h2>

<p><code>31[1]/6</code> のような形式。
最初の数字、<code>3</code>、<code>1</code>、<code>1</code> はそれぞれ参加者。
<code>/</code> の後ろの数字、<code>6</code> はリボルバーの最大装填数。</p>

<p>参加者の数字は弾倉を回転させる度合い。この場合、<code>3</code> ならば <code>3/6</code> 、つまり弾倉を半回転させる。
<code>[]</code> で囲まれている参加者は当たりを引いた人。</p>

<h2>出力</h2>

<p><code>000010</code> のような形式。</p>

<p><code>0</code> がハズレ、<code>1</code> がアタリ。
左から順番に並んでいる。</p>

<h2>補足</h2>

<p>不正な入力について考慮する必要はない。
出力候補が複数あることはない。</p>

<hr>

<p>実装ができた方は <a href="http://qiita.com/mtsmfm/items/b48952dee07784cce8f2">Qiitaの記事</a> のコメント欄からリンクを張っていただくと見つけやすくて助かります。</p>
<h2>サンプルデータ(修正版)</h2><table><thead><tr><th>#</th><th>入力</th><th>期待</th></tr></thead><tbody><tr><td>0</td><td>3[2]3/6</td><td>000100</td></tr><tr><td>1</td><td>21[3]/6</td><td>000100</td></tr><tr><td>2</td><td>12[3]/6</td><td>000100</td></tr><tr><td>3</td><td>3[2]1/6</td><td>000100</td></tr><tr><td>4</td><td>3[2]3/6</td><td>000100</td></tr><tr><td>5</td><td>1[1]3/6</td><td>010000</td></tr><tr><td>6</td><td>[3]4[4]3/7</td><td>1000100</td></tr><tr><td>7</td><td>4[4]24/7</td><td>0000100</td></tr><tr><td>8</td><td>[4]41[1]/7</td><td>1000010</td></tr><tr><td>9</td><td>1[1]33[1]/8</td><td>01000001</td></tr><tr><td>10</td><td>[1]12[4][3]/8</td><td>10100001</td></tr><tr><td>11</td><td>2[2][1]12/8</td><td>01001000</td></tr><tr><td>12</td><td>1[2][2][1]34/9</td><td>011100000</td></tr><tr><td>13</td><td>[4]1141[2]/9</td><td>100000010</td></tr><tr><td>14</td><td>[3]33[3][2]2/9</td><td>100000110</td></tr><tr><td>15</td><td>[5]1[3]44[2][3]/10</td><td>0100101001</td></tr><tr><td>16</td><td>3[1][2]23[3][1]/10</td><td>0110110000</td></tr><tr><td>17</td><td>33[5]12[5][2]/10</td><td>0000010011</td></tr><tr><td>18</td><td>13[3]1[4][4][4][1]/11</td><td>00101100110</td></tr><tr><td>19</td><td>[5]3[2]35[1]1[4]/11</td><td>10001010001</td></tr><tr><td>20</td><td>4[1]4[5]342[5]/11</td><td>00001010100</td></tr><tr><td>21</td><td>[5][4]55[2][2][4]33/12</td><td>001111100000</td></tr><tr><td>22</td><td>3[2]415[1][4][4]3/12</td><td>010101000100</td></tr><tr><td>23</td><td>3[2][4][2][4]4[5]4[1]/12</td><td>011001110010</td></tr><tr><td>24</td><td>3555[6]33[6]4[1]/13</td><td>0010010000010</td></tr><tr><td>25</td><td>4[1]32[6]3[3]4[3]4/13</td><td>0001100001001</td></tr><tr><td>26</td><td>2[2]14[3][1][6][4]63/13</td><td>0010011001010</td></tr><tr><td>27</td><td>2[9][9][9]8[2]3[4][8]2[1]8/15</td><td>011010100001110</td></tr><tr><td>28</td><td>[1][2][6]64[1][3]68[3][8]8/15</td><td>111001000011010</td></tr><tr><td>29</td><td>[7][6][5]54[5]8[5]53[8]1/15</td><td>010001110010001</td></tr></tbody></table><h2>テストデータ(修正版)</h2><textarea>/*0*/ test("3[2]3/6", "000100");
/*1*/ test("21[3]/6", "000100");
/*2*/ test("12[3]/6", "000100");
/*3*/ test("3[2]1/6", "000100");
/*4*/ test("3[2]3/6", "000100");
/*5*/ test("1[1]3/6", "010000");
/*6*/ test("[3]4[4]3/7", "1000100");
/*7*/ test("4[4]24/7", "0000100");
/*8*/ test("[4]41[1]/7", "1000010");
/*9*/ test("1[1]33[1]/8", "01000001");
/*10*/ test("[1]12[4][3]/8", "10100001");
/*11*/ test("2[2][1]12/8", "01001000");
/*12*/ test("1[2][2][1]34/9", "011100000");
/*13*/ test("[4]1141[2]/9", "100000010");
/*14*/ test("[3]33[3][2]2/9", "100000110");
/*15*/ test("[5]1[3]44[2][3]/10", "0100101001");
/*16*/ test("3[1][2]23[3][1]/10", "0110110000");
/*17*/ test("33[5]12[5][2]/10", "0000010011");
/*18*/ test("13[3]1[4][4][4][1]/11", "00101100110");
/*19*/ test("[5]3[2]35[1]1[4]/11", "10001010001");
/*20*/ test("4[1]4[5]342[5]/11", "00001010100");
/*21*/ test("[5][4]55[2][2][4]33/12", "001111100000");
/*22*/ test("3[2]415[1][4][4]3/12", "010101000100");
/*23*/ test("3[2][4][2][4]4[5]4[1]/12", "011001110010");
/*24*/ test("3555[6]33[6]4[1]/13", "0010010000010");
/*25*/ test("4[1]32[6]3[3]4[3]4/13", "0001100001001");
/*26*/ test("2[2]14[3][1][6][4]63/13", "0010011001010");
/*27*/ test("2[9][9][9]8[2]3[4][8]2[1]8/15", "011010100001110");
/*28*/ test("[1][2][6]64[1][3]68[3][8]8/15", "111001000011010");
/*29*/ test("[7][6][5]54[5]8[5]53[8]1/15", "010001110010001");</textarea><h2>サンプルデータ(修正前、一意にならない)</h2><table><thead><tr><th>#</th><th>入力</th><th>期待</th></tr></thead><tbody><tr><td>0</td><td>3[2]3/6</td><td>000100</td></tr><tr><td>1</td><td>31[2]/6</td><td>000010</td></tr><tr><td>2</td><td>32[1]/6</td><td>000001</td></tr><tr><td>3</td><td>[2][2]2/6</td><td>100010</td></tr><tr><td>4</td><td>1[3][2]/6</td><td>010010</td></tr><tr><td>5</td><td>2[2]2/6</td><td>001000</td></tr><tr><td>6</td><td>2[1]23/7</td><td>0010000</td></tr><tr><td>7</td><td>13[1]3/7</td><td>0000100</td></tr><tr><td>8</td><td>[4]2[1]2/7</td><td>1010000</td></tr><tr><td>9</td><td>3[1][2]2[2]/8</td><td>00011010</td></tr><tr><td>10</td><td>4[4]21[1]/8</td><td>00001001</td></tr><tr><td>11</td><td>[2][2]124/8</td><td>11000000</td></tr><tr><td>12</td><td>[3]4[2][1][3]3/9</td><td>100010110</td></tr><tr><td>13</td><td>[2][1]43[2]3/9</td><td>101010000</td></tr><tr><td>14</td><td>3[3][1]4[1]3/9</td><td>010100100</td></tr><tr><td>15</td><td>[3][5][3]554[4]/10</td><td>1100001100</td></tr><tr><td>16</td><td>[3]2[3][5][3]45/10</td><td>1110010000</td></tr><tr><td>17</td><td>53[1]4[1]2[4]/10</td><td>0010100010</td></tr><tr><td>18</td><td>2[3][2]5[4]54[1]/11</td><td>00110010100</td></tr><tr><td>19</td><td>[3][5]554[2]25/11</td><td>10000010010</td></tr><tr><td>20</td><td>[1]5[5]413[5]2/11</td><td>10100100000</td></tr><tr><td>21</td><td>[1]33[3]52[5][4]2/12</td><td>110000101000</td></tr><tr><td>22</td><td>4[4]3[1][3]4[1]4[3]/12</td><td>010011010100</td></tr><tr><td>23</td><td>[3]2[1][2]14[2]54/12</td><td>101100000010</td></tr><tr><td>24</td><td>[2][6]45[3][2]42[6]2/13</td><td>1001100011000</td></tr><tr><td>25</td><td>[1]2[3][3]6[3][1]56[4]/13</td><td>1010001010101</td></tr><tr><td>26</td><td>3[4]213[6]1[1]5[6]/13</td><td>0011000001100</td></tr><tr><td>27</td><td>6[3]8[8]8[6]4[4][2][8][7][9]/15</td><td>000101111011001</td></tr><tr><td>28</td><td>[4]6[5]15[2]6[5]343[2]/15</td><td>100100100000110</td></tr><tr><td>29</td><td>66[6]2[9]6[6][9]5[6]11/15</td><td>001001010000101</td></tr></tbody></table><h2>テストデータ(修正前、一意にならない)</h2><textarea>/*0*/ test("3[2]3/6", "000100");
/*1*/ test("31[2]/6", "000010");
/*2*/ test("32[1]/6", "000001");
/*3*/ test("[2][2]2/6", "100010");
/*4*/ test("1[3][2]/6", "010010");
/*5*/ test("2[2]2/6", "001000");
/*6*/ test("2[1]23/7", "0010000");
/*7*/ test("13[1]3/7", "0000100");
/*8*/ test("[4]2[1]2/7", "1010000");
/*9*/ test("3[1][2]2[2]/8", "00011010");
/*10*/ test("4[4]21[1]/8", "00001001");
/*11*/ test("[2][2]124/8", "11000000");
/*12*/ test("[3]4[2][1][3]3/9", "100010110");
/*13*/ test("[2][1]43[2]3/9", "101010000");
/*14*/ test("3[3][1]4[1]3/9", "010100100");
/*15*/ test("[3][5][3]554[4]/10", "1100001100");
/*16*/ test("[3]2[3][5][3]45/10", "1110010000");
/*17*/ test("53[1]4[1]2[4]/10", "0010100010");
/*18*/ test("2[3][2]5[4]54[1]/11", "00110010100");
/*19*/ test("[3][5]554[2]25/11", "10000010010");
/*20*/ test("[1]5[5]413[5]2/11", "10100100000");
/*21*/ test("[1]33[3]52[5][4]2/12", "110000101000");
/*22*/ test("4[4]3[1][3]4[1]4[3]/12", "010011010100");
/*23*/ test("[3]2[1][2]14[2]54/12", "101100000010");
/*24*/ test("[2][6]45[3][2]42[6]2/13", "1001100011000");
/*25*/ test("[1]2[3][3]6[3][1]56[4]/13", "1010001010101");
/*26*/ test("3[4]213[6]1[1]5[6]/13", "0011000001100");
/*27*/ test("6[3]8[8]8[6]4[4][2][8][7][9]/15", "000101111011001");
/*28*/ test("[4]6[5]15[2]6[5]343[2]/15", "100100100000110");
/*29*/ test("66[6]2[9]6[6][9]5[6]11/15", "001001010000101");</textarea></section></div></div></body><script type="text/javascript">
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-48013282-1', 'auto');
  ga('send', 'pageview');
</script>
</html>
<html><head><meta charset="utf-8" /><meta content="IE=edge;chrome=1" http-equiv="X-UA-Compatible" /><script src="/javascripts/application.js"></script><link href="/stylesheets/application.css" rel="stylesheet" /><title>mtsmfm blog - RubyKaigi 2017 で Language Serverの話をします</title><link rel="alternate" type="application/atom+xml" title="Atom Feed" href="/feed.xml" /></head><body><div class="row"><div class="three columns"><h3><a href="/">mtsmfm blog</a></h3><div class="row"><div class="large btn default"><a href="https://github.com/mtsmfm"><i class="fa fa-github"></i></a></div><div class="large btn default"><a href="https://twitter.com/mtsmfm"><i class="fa fa-twitter"></i></a></div></div></div><div class="nine columns"><section class="post"><h2><a href="/2017/09/15/rubykaigi.html">RubyKaigi 2017 で Language Serverの話をします</a></h2><time>2017-09-15</time><p>RubyKaigi 2017 で Language Server の話をします。
<a href="http://rubykaigi.org/2017/presentations/mtsmfm.html">http://rubykaigi.org/2017/presentations/mtsmfm.html</a></p>

<p>この発表を通じて、Language Server というもの、その考え方を知ってもらい、
「あのエディタならこの便利プラグインがあるがこのエディタにはない」という状況が発生しないようにすることで、開発者が Ruby をさらにキメやすくなるといいなぁと思っています。
また、Ruby の静的解析について僕自身手探りな状態なので、情報交換ができれば嬉しいです。</p>

<p>Language Server とは、補完や定義ジャンプ、シンタックスエラーの検出といった、エディタに向けた便利機能を提供してくれるサーバです。
具体的にどのようにエディタとやり取りするかは <a href="https://github.com/Microsoft/language-server-protocol">Language Server Protocol</a> に定義されています。</p>

<p>Ruby におけるエディタの補完は基本的にバッファから単語を出してくるだけだと思うのですが、これがもっと便利になったらいいなぁと思い、
<a href="https://github.com/mtsmfm/language_server-ruby">language_server という gem</a> を作っています。
現状、 language_server gem では、 <code>ruby -wc</code> によるシンタックスエラーおよび警告の検出、 rcodetools による動的情報を利用した補完、
そして (まだ完璧ではないですが) 自前実装による定数の補完と定義ジャンプができます。</p>

<p>また、プロトコル部分は <a href="https://github.com/mtsmfm/language_server-protocol-ruby">language_server-protocol</a> として切り出したので、
簡単に Ruby で Language Server を書き始めることができます。</p>

<p>このセッションでは、大きく 3 つの内容を話す予定です。</p>

<ol>
<li>Language Server とは何か</li>
<li>Ruby で Language Server はどう作ればいいか</li>
<li>language_server gem の紹介</li>
</ol>

<p>登場するキーワードとしては、以下のようなものが出てきます。一応発表内でも簡単に説明する予定です。</p>

<ul>
<li><a href="https://github.com/Microsoft/language-server-protocol">Language Server Protocol</a></li>
<li><a href="http://www.jsonrpc.org/specification">JSON RPC</a></li>
<li><a href="https://docs.ruby-lang.org/ja/2.4.0/library/ripper.html">Ripper</a></li>
</ul>

<p>Language Server とは結局のところ LSP さえ喋れれば裏側は自由なハブのようなものなので、 (LSP の語彙力の範疇であれば) Rubocop など他のツールを動かすこともできます。
<a href="http://magazine.rubyist.net/?preRubyKaigi2017-01">RubyKaigi 2017 タイムテーブル徹底解説</a> にあるように、型や静的解析についての発表がいくつもあるので、
これらの話を聞いて組み込んでいけたら便利そうです。</p>

<p>それでは広島で。</p>
</section></div></div></body><script type="text/javascript">
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-48013282-1', 'auto');
  ga('send', 'pageview');
</script>
</html>